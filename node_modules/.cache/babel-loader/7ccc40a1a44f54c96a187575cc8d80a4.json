{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/lordokami/lordokami/lost-my-keys-vr/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _classCallCheck from \"/Users/lordokami/lordokami/lost-my-keys-vr/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/lordokami/lordokami/lost-my-keys-vr/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"/Users/lordokami/lordokami/lost-my-keys-vr/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/Users/lordokami/lordokami/lost-my-keys-vr/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/Users/lordokami/lordokami/lost-my-keys-vr/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/lordokami/lordokami/lost-my-keys-vr/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport Node from '../core/Node.js';\nimport { vector } from '../core/NodeBuilder.js';\n\nvar SplitNode = /*#__PURE__*/function (_Node) {\n  _inherits(SplitNode, _Node);\n\n  var _super = _createSuper(SplitNode);\n\n  function SplitNode(node) {\n    var _this;\n\n    var components = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'x';\n\n    _classCallCheck(this, SplitNode);\n\n    _this = _super.call(this);\n    _this.node = node;\n    _this.components = components;\n    return _this;\n  }\n\n  _createClass(SplitNode, [{\n    key: \"getVectorLength\",\n    value: function getVectorLength() {\n      var vectorLength = this.components.length;\n\n      var _iterator = _createForOfIteratorHelper(this.components),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var c = _step.value;\n          vectorLength = Math.max(vector.indexOf(c) + 1, vectorLength);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return vectorLength;\n    }\n  }, {\n    key: \"getNodeType\",\n    value: function getNodeType(builder) {\n      return builder.getTypeFromLength(this.components.length);\n    }\n  }, {\n    key: \"generate\",\n    value: function generate(builder) {\n      var node = this.node;\n      var nodeTypeLength = builder.getTypeLength(node.getNodeType(builder));\n\n      if (nodeTypeLength > 1) {\n        var type = null;\n        var componentsLength = this.getVectorLength();\n\n        if (componentsLength >= nodeTypeLength) {\n          // need expand the input node\n          type = builder.getTypeFromLength(this.getVectorLength());\n        }\n\n        var nodeSnippet = node.build(builder, type);\n        return \"\".concat(nodeSnippet, \".\").concat(this.components);\n      } else {\n        // ignore components if node is a float\n        return node.build(builder);\n      }\n    }\n  }, {\n    key: \"serialize\",\n    value: function serialize(data) {\n      _get(_getPrototypeOf(SplitNode.prototype), \"serialize\", this).call(this, data);\n\n      data.components = this.components;\n    }\n  }, {\n    key: \"deserialize\",\n    value: function deserialize(data) {\n      _get(_getPrototypeOf(SplitNode.prototype), \"deserialize\", this).call(this, data);\n\n      this.components = data.components;\n    }\n  }]);\n\n  return SplitNode;\n}(Node);\n\nexport default SplitNode;","map":{"version":3,"sources":["/Users/lordokami/lordokami/lost-my-keys-vr/node_modules/three-stdlib/nodes/utils/SplitNode.js"],"names":["Node","vector","SplitNode","node","components","vectorLength","length","c","Math","max","indexOf","builder","getTypeFromLength","nodeTypeLength","getTypeLength","getNodeType","type","componentsLength","getVectorLength","nodeSnippet","build","data"],"mappings":";;;;;;;AAAA,OAAOA,IAAP,MAAiB,iBAAjB;AACA,SAASC,MAAT,QAAuB,wBAAvB;;IAEMC,S;;;;;AACJ,qBAAYC,IAAZ,EAAoC;AAAA;;AAAA,QAAlBC,UAAkB,uEAAL,GAAK;;AAAA;;AAClC;AACA,UAAKD,IAAL,GAAYA,IAAZ;AACA,UAAKC,UAAL,GAAkBA,UAAlB;AAHkC;AAInC;;;;WAED,2BAAkB;AAChB,UAAIC,YAAY,GAAG,KAAKD,UAAL,CAAgBE,MAAnC;;AADgB,iDAGA,KAAKF,UAHL;AAAA;;AAAA;AAGhB,4DAAiC;AAAA,cAAtBG,CAAsB;AAC/BF,UAAAA,YAAY,GAAGG,IAAI,CAACC,GAAL,CAASR,MAAM,CAACS,OAAP,CAAeH,CAAf,IAAoB,CAA7B,EAAgCF,YAAhC,CAAf;AACD;AALe;AAAA;AAAA;AAAA;AAAA;;AAOhB,aAAOA,YAAP;AACD;;;WAED,qBAAYM,OAAZ,EAAqB;AACnB,aAAOA,OAAO,CAACC,iBAAR,CAA0B,KAAKR,UAAL,CAAgBE,MAA1C,CAAP;AACD;;;WAED,kBAASK,OAAT,EAAkB;AAChB,UAAMR,IAAI,GAAG,KAAKA,IAAlB;AACA,UAAMU,cAAc,GAAGF,OAAO,CAACG,aAAR,CAAsBX,IAAI,CAACY,WAAL,CAAiBJ,OAAjB,CAAtB,CAAvB;;AAEA,UAAIE,cAAc,GAAG,CAArB,EAAwB;AACtB,YAAIG,IAAI,GAAG,IAAX;AACA,YAAMC,gBAAgB,GAAG,KAAKC,eAAL,EAAzB;;AAEA,YAAID,gBAAgB,IAAIJ,cAAxB,EAAwC;AACtC;AACAG,UAAAA,IAAI,GAAGL,OAAO,CAACC,iBAAR,CAA0B,KAAKM,eAAL,EAA1B,CAAP;AACD;;AAED,YAAMC,WAAW,GAAGhB,IAAI,CAACiB,KAAL,CAAWT,OAAX,EAAoBK,IAApB,CAApB;AACA,yBAAUG,WAAV,cAAyB,KAAKf,UAA9B;AACD,OAXD,MAWO;AACL;AACA,eAAOD,IAAI,CAACiB,KAAL,CAAWT,OAAX,CAAP;AACD;AACF;;;WAED,mBAAUU,IAAV,EAAgB;AACd,+EAAgBA,IAAhB;;AACAA,MAAAA,IAAI,CAACjB,UAAL,GAAkB,KAAKA,UAAvB;AACD;;;WAED,qBAAYiB,IAAZ,EAAkB;AAChB,iFAAkBA,IAAlB;;AACA,WAAKjB,UAAL,GAAkBiB,IAAI,CAACjB,UAAvB;AACD;;;;EAlDqBJ,I;;AAsDxB,eAAeE,SAAf","sourcesContent":["import Node from '../core/Node.js';\nimport { vector } from '../core/NodeBuilder.js';\n\nclass SplitNode extends Node {\n  constructor(node, components = 'x') {\n    super();\n    this.node = node;\n    this.components = components;\n  }\n\n  getVectorLength() {\n    let vectorLength = this.components.length;\n\n    for (const c of this.components) {\n      vectorLength = Math.max(vector.indexOf(c) + 1, vectorLength);\n    }\n\n    return vectorLength;\n  }\n\n  getNodeType(builder) {\n    return builder.getTypeFromLength(this.components.length);\n  }\n\n  generate(builder) {\n    const node = this.node;\n    const nodeTypeLength = builder.getTypeLength(node.getNodeType(builder));\n\n    if (nodeTypeLength > 1) {\n      let type = null;\n      const componentsLength = this.getVectorLength();\n\n      if (componentsLength >= nodeTypeLength) {\n        // need expand the input node\n        type = builder.getTypeFromLength(this.getVectorLength());\n      }\n\n      const nodeSnippet = node.build(builder, type);\n      return `${nodeSnippet}.${this.components}`;\n    } else {\n      // ignore components if node is a float\n      return node.build(builder);\n    }\n  }\n\n  serialize(data) {\n    super.serialize(data);\n    data.components = this.components;\n  }\n\n  deserialize(data) {\n    super.deserialize(data);\n    this.components = data.components;\n  }\n\n}\n\nexport default SplitNode;\n"]},"metadata":{},"sourceType":"module"}